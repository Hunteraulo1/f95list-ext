var content=function(){"use strict";var P=Object.defineProperty;var R=(c,o,I)=>o in c?P(c,o,{enumerable:!0,configurable:!0,writable:!0,value:I}):c[o]=I;var l=(c,o,I)=>R(c,typeof o!="symbol"?o+"":o,I);var S,E;function c(s){return s}const o=((E=(S=globalThis.browser)==null?void 0:S.runtime)==null?void 0:E.id)==null?globalThis.chrome:globalThis.browser,I={matches:["*://f95zone.to/sam/latest_alpha/*","*://f95zone.to/threads/*","*://lewdcorner.com/latest-updates/*","*://lewdcorner.com/threads/*"],main(){console.info("[F95ListFR] Injecting script starting !"),K()}},w=s=>{if(!(s&&s.length>0))return;const{pathname:t}=window.location;if(t==="/sam/latest_alpha/")A(".resource-tile_link",s);else if(t.startsWith("/latest-updates/"))A(".porta-article-header",s);else if(t.startsWith("/threads/")){const i=Number(window.location.pathname.split("/")[2].split(".")[1]);for(const e of s){if(e.id!==i||e.hostname!==u)continue;const n=document.querySelector(".p-title-value");if(!n||n!=null&&n.classList.contains("flag-inserted"))return;v(n,e.tlink),n==null||n.classList.add("flag-inserted")}}},K=async()=>{try{const s=await o.runtime.sendMessage("f95list-script");w(s);const{pathname:t}=window.location,i=t==="/sam/latest_alpha/",e=t.startsWith("/latest-updates/");if(i||e){const n=async g=>{(i&&g.length>35||e)&&w(s)},r=new MutationObserver(n),a={childList:!0,subtree:!0};r.observe(document.body,a)}console.info("[F95ListFR] Injecting script successful !")}catch(s){console.error(s)}},{hostname:u}=window.location,A=(s,t)=>{const i=document.querySelectorAll(s);for(const e of Array.from(i)){const n=Number(u==="f95zone.to"?e.pathname.split("/")[2]:e.pathname.split("/")[2].split(".")[1]);if(e.classList.contains("flag-inserted"))return;t.find(r=>r.id===n&&r.hostname===u)&&(v(u==="f95zone.to"?e.children[1].children[0]:e.children[1].children[1]),e.classList.add("flag-inserted"))}},v=(s,t=null)=>{const i=document.createElement("a"),e=document.createElement("img");i.target="_BLANK",i.href=t??"#",e.style.width="32px",e.style.marginRight="4px",e.style.borderRadius="4px",e.style.float="inherit",e.style.verticalAlign="middle",e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAELBAMAAAAFMM1/AAAAGFBMVEX///8AI5XtKTmerNf6yMwAGJDtKDjsITLN9eOpAAAA9ElEQVR42u3P0QAAQAgFsBRO4WQCyCB/iCDe72awerGpWO9PiYiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIJA7ZdJrTjvyKSgAAAABJRU5ErkJggg==",i.append(e),s.prepend(i)};function h(s,...t){}const T={debug:(...s)=>h(console.debug,...s),log:(...s)=>h(console.log,...s),warn:(...s)=>h(console.warn,...s),error:(...s)=>h(console.error,...s)},f=class f extends Event{constructor(t,i){super(f.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=i}};l(f,"EVENT_NAME",y("wxt:locationchange"));let m=f;function y(s){var t;return`${(t=o==null?void 0:o.runtime)==null?void 0:t.id}:content:${s}`}function _(s){let t,i;return{run(){t==null&&(i=new URL(location.href),t=s.setInterval(()=>{let e=new URL(location.href);e.href!==i.href&&(window.dispatchEvent(new m(e,i)),i=e)},1e3))}}}const d=class d{constructor(t,i){l(this,"isTopFrame",window.self===window.top);l(this,"abortController");l(this,"locationWatcher",_(this));l(this,"receivedMessageIds",new Set);this.contentScriptName=t,this.options=i,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return o.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,i){const e=setInterval(()=>{this.isValid&&t()},i);return this.onInvalidated(()=>clearInterval(e)),e}setTimeout(t,i){const e=setTimeout(()=>{this.isValid&&t()},i);return this.onInvalidated(()=>clearTimeout(e)),e}requestAnimationFrame(t){const i=requestAnimationFrame((...e)=>{this.isValid&&t(...e)});return this.onInvalidated(()=>cancelAnimationFrame(i)),i}requestIdleCallback(t,i){const e=requestIdleCallback((...n)=>{this.signal.aborted||t(...n)},i);return this.onInvalidated(()=>cancelIdleCallback(e)),e}addEventListener(t,i,e,n){var r;i==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(r=t.addEventListener)==null||r.call(t,i.startsWith("wxt:")?y(i):i,e,{...n,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),T.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:d.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){var r,a,g;const i=((r=t.data)==null?void 0:r.type)===d.SCRIPT_STARTED_MESSAGE_TYPE,e=((a=t.data)==null?void 0:a.contentScriptName)===this.contentScriptName,n=!this.receivedMessageIds.has((g=t.data)==null?void 0:g.messageId);return i&&e&&n}listenForNewerScripts(t){let i=!0;const e=n=>{if(this.verifyScriptStartedEvent(n)){this.receivedMessageIds.add(n.data.messageId);const r=i;if(i=!1,r&&(t!=null&&t.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",e),this.onInvalidated(()=>removeEventListener("message",e))}};l(d,"SCRIPT_STARTED_MESSAGE_TYPE",y("wxt:content-script-started"));let b=d;const M=Symbol("null");let N=0;class F extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[t]=arguments;if(t!=null){if(typeof t[Symbol.iterator]!="function")throw new TypeError(typeof t+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[i,e]of t)this.set(i,e)}}_getPublicKeys(t,i=!1){if(!Array.isArray(t))throw new TypeError("The keys parameter must be an array");const e=this._getPrivateKey(t,i);let n;return e&&this._publicKeys.has(e)?n=this._publicKeys.get(e):i&&(n=[...t],this._publicKeys.set(e,n)),{privateKey:e,publicKey:n}}_getPrivateKey(t,i=!1){const e=[];for(let n of t){n===null&&(n=M);const r=typeof n=="object"||typeof n=="function"?"_objectHashes":typeof n=="symbol"?"_symbolHashes":!1;if(!r)e.push(n);else if(this[r].has(n))e.push(this[r].get(n));else if(i){const a=`@@mkm-ref-${N++}@@`;this[r].set(n,a),e.push(a)}else return!1}return JSON.stringify(e)}set(t,i){const{publicKey:e}=this._getPublicKeys(t,!0);return super.set(e,i)}get(t){const{publicKey:i}=this._getPublicKeys(t);return super.get(i)}has(t){const{publicKey:i}=this._getPublicKeys(t);return super.has(i)}delete(t){const{publicKey:i,privateKey:e}=this._getPublicKeys(t);return!!(i&&super.delete(i)&&this._publicKeys.delete(e))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new F;function C(){}function p(s,...t){}const L={debug:(...s)=>p(console.debug,...s),log:(...s)=>p(console.log,...s),warn:(...s)=>p(console.warn,...s),error:(...s)=>p(console.error,...s)};return(async()=>{try{const{main:s,...t}=I,i=new b("content",t);return await s(i)}catch(s){throw L.error('The content script "content" crashed on startup!',s),s}})()}();
content;
